<!doctype html>
<html lang="en" ng-app="fitnessApp">
  <head>
    <title>Fitness Log</title>
    <script src="bower_components/jquery/dist/jquery.min.js"></script>
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.css">
    <script src="bower_components/angular/angular.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.css">
    <script src="https://cdn.jsdelivr.net/chartist.js/latest/chartist.min.js"></script>
    <script src="controller.js"></script>
  </head>
  <h1>Fitness Log of {{name}}</h1>
  <body ng-controller="FitnessController">
    <div class="ct-chart"></div>
    <div  id="chart1" class="ct-chart"></div>
    <script>

     setTimeout(
  function() 
  {
     function getColData(col){
       var resultCol = [];
         jQuery("#strength_table tr").each(function (i, el) {
           var $tds = $(this).find("td:nth-child(" + col + ")");
           if ($tds.text() != "") {
             resultCol.push($tds.text());
           }

         });
       return resultCol;
       };


     angular.element(document).ready(function () {
       new Chartist.Line('#chart1', {
         labels: getColData(1),
         series: [
           {
             name: 'Chinups',
             data: getColData(2)
           },
           {
             name: 'Pushups',
             data: getColData(3)
           },
           {
             name: 'Pullups',
             data: getColData(4)
           }]
       }, {
         fullWidth: true
       }
       );
     });
     }, 1000);
    </script>
    <table class="table" id="strength_table">
      <tr>
        <th>
          Date
        </th>
        <th>
          Chinups
        </th>
        <th>
          Pushups
        </th>
        <th>
          Pullups
        </th>
        <th>
          
        </th>
      </tr>
      <tr ng-repeat="strength in strengths">
        <td>
          {{strength.date}}
        </td>
        <td>
          {{strength.chinups}}
        </td>
        <td>
          {{strength.pushups}}
        </td>
        <td>
          {{strength.pullups}}
        </td>        
      </tr>
    </table>
  </body>
</html>
